{"version":3,"file":"index.js","sources":["../src/CppObject.ts","../src/const.ts","../src/ZBarSymbol.ts","../build/zbar.js","../src/instance.ts","../src/ZBarImage.ts","../src/ZBarScanner.ts","../src/main.ts"],"sourcesContent":["import type ZBarInstance from './ZBarInstance';\n\nexport class CppObject {\n  protected ptr: number;\n  protected inst: ZBarInstance;\n\n  protected constructor(ptr: number, inst: ZBarInstance) {\n    this.ptr = ptr;\n    this.inst = inst;\n  }\n\n  protected checkAlive(): void {\n    if (this.ptr) return;\n    throw Error('Call after destroyed');\n  }\n\n  getPointer(): number {\n    this.checkAlive();\n    return this.ptr;\n  }\n}\n","export const ZBarSymbolType = {\n  ZBAR_NONE: 0 /**< no symbol decoded */,\n  ZBAR_PARTIAL: 1 /**< intermediate status */,\n  ZBAR_EAN2: 2 /**< GS1 2-digit add-on */,\n  ZBAR_EAN5: 5 /**< GS1 5-digit add-on */,\n  ZBAR_EAN8: 8 /**< EAN-8 */,\n  ZBAR_UPCE: 9 /**< UPC-E */,\n  ZBAR_ISBN10: 10 /**< ISBN-10 (from EAN-13). @since 0.4 */,\n  ZBAR_UPCA: 12 /**< UPC-A */,\n  ZBAR_EAN13: 13 /**< EAN-13 */,\n  ZBAR_ISBN13: 14 /**< ISBN-13 (from EAN-13). @since 0.4 */,\n  ZBAR_COMPOSITE: 15 /**< EAN/UPC composite */,\n  ZBAR_I25: 25 /**< Interleaved 2 of 5. @since 0.4 */,\n  ZBAR_DATABAR: 34 /**< GS1 DataBar (RSS). @since 0.11 */,\n  ZBAR_DATABAR_EXP: 35 /**< GS1 DataBar Expanded. @since 0.11 */,\n  ZBAR_CODABAR: 38 /**< Codabar. @since 0.11 */,\n  ZBAR_CODE39: 39 /**< Code 39. @since 0.4 */,\n  ZBAR_PDF417: 57 /**< PDF417. @since 0.6 */,\n  ZBAR_QRCODE: 64 /**< QR Code. @since 0.10 */,\n  ZBAR_SQCODE: 80 /**< SQ Code. @since 0.20.1 */,\n  ZBAR_CODE93: 93 /**< Code 93. @since 0.11 */,\n  ZBAR_CODE128: 128 /**< Code 128 */,\n\n  /*\n   * Please see _zbar_get_symbol_hash() if adding\n   * anything after 128\n   */\n\n  /** mask for base symbol type.\n   * @deprecated in 0.11, remove this from existing code\n   */\n  ZBAR_SYMBOL: 0x00ff,\n  /** 2-digit add-on flag.\n   * @deprecated in 0.11, a ::ZBAR_EAN2 component is used for\n   * 2-digit GS1 add-ons\n   */\n  ZBAR_ADDON2: 0x0200,\n  /** 5-digit add-on flag.\n   * @deprecated in 0.11, a ::ZBAR_EAN5 component is used for\n   * 5-digit GS1 add-ons\n   */\n  ZBAR_ADDON5: 0x0500,\n  /** add-on flag mask.\n   * @deprecated in 0.11, GS1 add-ons are represented using composite\n   * symbols of type ::ZBAR_COMPOSITE; add-on components use ::ZBAR_EAN2\n   * or ::ZBAR_EAN5\n   */\n  ZBAR_ADDON: 0x0700\n} as const;\n\nexport type ZBarSymbolType = typeof ZBarSymbolType[keyof typeof ZBarSymbolType];\n\nexport const ZBarConfigType = {\n  ZBAR_CFG_ENABLE: 0 /**< enable symbology/feature */,\n  ZBAR_CFG_ADD_CHECK: 1 /**< enable check digit when optional */,\n  ZBAR_CFG_EMIT_CHECK: 2 /**< return check digit when present */,\n  ZBAR_CFG_ASCII: 3 /**< enable full ASCII character set */,\n  ZBAR_CFG_BINARY: 4 /**< don't convert binary data to text */,\n  ZBAR_CFG_NUM: 5 /**< number of boolean decoder configs */,\n\n  ZBAR_CFG_MIN_LEN: 0x20 /**< minimum data length for valid decode */,\n  ZBAR_CFG_MAX_LEN: 0x21 /**< maximum data length for valid decode */,\n\n  ZBAR_CFG_UNCERTAINTY: 0x40 /**< required video consistency frames */,\n\n  ZBAR_CFG_POSITION: 0x80 /**< enable scanner to collect position data */,\n  ZBAR_CFG_TEST_INVERTED: 0x81 /**< if fails to decode, test inverted */,\n\n  ZBAR_CFG_X_DENSITY: 0x100 /**< image scanner vertical scan density */,\n  ZBAR_CFG_Y_DENSITY: 0x101 /**< image scanner horizontal scan density */\n} as const;\n\nexport type ZBarConfigType = typeof ZBarConfigType[keyof typeof ZBarConfigType];\n\nexport const ZBarOrientation = {\n  ZBAR_ORIENT_UNKNOWN: -1 /**< unable to determine orientation */,\n  ZBAR_ORIENT_UP: 0 /**< upright, read left to right */,\n  ZBAR_ORIENT_RIGHT: 1 /**< sideways, read top to bottom */,\n  ZBAR_ORIENT_DOWN: 2 /**< upside-down, read right to left */,\n  ZBAR_ORIENT_LEFT: 3 /**< sideways, read bottom to top */\n} as const;\n\nexport type ZBarOrientation =\n  typeof ZBarOrientation[keyof typeof ZBarOrientation];\n","import { ZBarOrientation, ZBarSymbolType } from './const';\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nclass TypePointer {\n  protected ptr: number;\n  protected ptr32: number;\n  protected buf: ArrayBuffer;\n  protected HEAP8: Int8Array;\n  protected HEAP32: Int32Array;\n  protected HEAPU32: Uint32Array;\n\n  constructor(ptr: number, buf: ArrayBuffer) {\n    this.ptr = ptr;\n    this.ptr32 = ptr >> 2;\n    this.buf = buf;\n    this.HEAP8 = new Int8Array(buf);\n    this.HEAPU32 = new Uint32Array(buf);\n    this.HEAP32 = new Int32Array(buf);\n  }\n}\n\nclass SymbolPtr extends TypePointer {\n  get type(): ZBarSymbolType {\n    return this.HEAPU32[this.ptr32] as ZBarSymbolType;\n  }\n\n  get data(): Int8Array {\n    const len = this.HEAPU32[this.ptr32 + 4],\n      ptr = this.HEAPU32[this.ptr32 + 5];\n    return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len));\n  }\n\n  get points(): Array<Point> {\n    const len = this.HEAPU32[this.ptr32 + 7],\n      ptr = this.HEAPU32[this.ptr32 + 8],\n      ptr32 = ptr >> 2,\n      res: Point[] = [];\n    for (let i = 0; i < len; ++i) {\n      const x = this.HEAP32[ptr32 + i * 2],\n        y = this.HEAP32[ptr32 + i * 2 + 1];\n      res.push({ x, y } as Point);\n    }\n    return res;\n  }\n\n  get orientation(): ZBarOrientation {\n    return this.HEAP32[this.ptr32 + 9] as ZBarOrientation;\n  }\n\n  get next(): SymbolPtr | null {\n    const ptr = this.HEAPU32[this.ptr32 + 11];\n    if (!ptr) return null;\n    return new SymbolPtr(ptr, this.buf);\n  }\n\n  get time(): number {\n    return this.HEAPU32[this.ptr32 + 13];\n  }\n\n  get cacheCount(): number {\n    return this.HEAP32[this.ptr32 + 14];\n  }\n\n  get quality(): number {\n    return this.HEAP32[this.ptr32 + 15];\n  }\n}\n\nclass SymbolSetPtr extends TypePointer {\n  get head(): SymbolPtr | null {\n    const ptr = this.HEAPU32[this.ptr32 + 2];\n    if (!ptr) return null;\n    return new SymbolPtr(ptr, this.buf);\n  }\n}\n\nexport class ZBarSymbol {\n  type: ZBarSymbolType;\n  typeName: string;\n  data: Int8Array;\n  points: Array<Point>;\n  orientation: ZBarOrientation;\n  time: number;\n  cacheCount: number;\n  quality: number;\n  private constructor(ptr: SymbolPtr) {\n    this.type = ptr.type;\n    this.typeName = Object.keys(ZBarSymbolType).find(\n      key => ZBarSymbolType[key as keyof typeof ZBarSymbolType] === this.type\n    ) as string;\n    this.data = ptr.data;\n    this.points = ptr.points;\n    this.orientation = ptr.orientation;\n    this.time = ptr.time;\n    this.cacheCount = ptr.cacheCount;\n    this.quality = ptr.quality;\n  }\n\n  static createSymbolsFromPtr(\n    ptr: number,\n    buf: ArrayBuffer\n  ): Array<ZBarSymbol> {\n    if (ptr == 0) return [];\n\n    const set = new SymbolSetPtr(ptr, buf);\n    let symbol = set.head;\n    const res: ZBarSymbol[] = [];\n    while (symbol !== null) {\n      res.push(new ZBarSymbol(symbol));\n      symbol = symbol.next;\n    }\n    return res;\n  }\n\n  decode(encoding?: string) {\n    const decoder = new TextDecoder(encoding);\n    return decoder.decode(this.data);\n  }\n}\n","\nvar zbarWasm = (() => {\n  var _scriptDir = import.meta.url;\n  \n  return (\nasync function(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts==\"function\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_NODE){const{createRequire:createRequire}=await import(\"module\");var require=createRequire(import.meta.url);var fs=require(\"fs\");var nodePath=require(\"path\");if(ENVIRONMENT_IS_WORKER){scriptDirectory=nodePath.dirname(scriptDirectory)+\"/\"}else{scriptDirectory=require(\"url\").fileURLToPath(new URL(\"./\",import.meta.url))}read_=(filename,binary)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);return fs.readFileSync(filename,binary?undefined:\"utf8\")};readBinary=filename=>{var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}return ret};readAsync=(filename,onload,onerror,binary=true)=>{filename=isFileURI(filename)?new URL(filename):nodePath.normalize(filename);fs.readFile(filename,binary?undefined:\"utf8\",(err,data)=>{if(err)onerror(err);else onload(binary?data.buffer:data)})};if(!Module[\"thisProgram\"]&&process.argv.length>1){thisProgram=process.argv[1].replace(/\\\\/g,\"/\")}arguments_=process.argv.slice(2);quit_=(status,toThrow)=>{process.exitCode=status;throw toThrow};Module[\"inspect\"]=()=>\"[Emscripten Module object]\"}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var wasmExports;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;if(Module[\"locateFile\"]){wasmBinaryFile=\"zbar.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}}else{wasmBinaryFile=new URL(\"zbar.wasm\",import.meta.url).href}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"&&!isFileURI(binaryFile)){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}else if(readAsync){return new Promise((resolve,reject)=>{readAsync(binaryFile,response=>resolve(new Uint8Array(response)),reject)})}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&!isFileURI(binaryFile)&&!ENVIRONMENT_IS_NODE&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"g\"];updateMemoryViews();wasmTable=wasmExports[\"s\"];addOnInit(wasmExports[\"h\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var nowIsMonotonic=true;var __emscripten_get_now_is_monotonic=()=>nowIsMonotonic;function _emscripten_date_now(){return Date.now()}var _emscripten_get_now;_emscripten_get_now=()=>performance.now();var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=size-b.byteLength+65535>>>16;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var SYSCALLS={varargs:undefined,get(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr(ptr){var ret=UTF8ToString(ptr);return ret}};var _fd_close=fd=>52;function convertI32PairToI53Checked(lo,hi){return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){var offset=convertI32PairToI53Checked(offset_low,offset_high);return 70}var printCharBuffers=[null,[],[]];var printChar=(stream,curr)=>{var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}};var _fd_write=(fd,iov,iovcnt,pnum)=>{var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j])}num+=len}HEAPU32[pnum>>2]=num;return 0};var wasmImports={d:__emscripten_get_now_is_monotonic,e:_emscripten_date_now,c:_emscripten_resize_heap,f:_fd_close,b:_fd_seek,a:_fd_write};var asm=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"h\"])();var _ImageScanner_create=Module[\"_ImageScanner_create\"]=()=>(_ImageScanner_create=Module[\"_ImageScanner_create\"]=wasmExports[\"i\"])();var _ImageScanner_destory=Module[\"_ImageScanner_destory\"]=a0=>(_ImageScanner_destory=Module[\"_ImageScanner_destory\"]=wasmExports[\"j\"])(a0);var _ImageScanner_set_config=Module[\"_ImageScanner_set_config\"]=(a0,a1,a2,a3)=>(_ImageScanner_set_config=Module[\"_ImageScanner_set_config\"]=wasmExports[\"k\"])(a0,a1,a2,a3);var _ImageScanner_enable_cache=Module[\"_ImageScanner_enable_cache\"]=(a0,a1)=>(_ImageScanner_enable_cache=Module[\"_ImageScanner_enable_cache\"]=wasmExports[\"l\"])(a0,a1);var _ImageScanner_recycle_image=Module[\"_ImageScanner_recycle_image\"]=(a0,a1)=>(_ImageScanner_recycle_image=Module[\"_ImageScanner_recycle_image\"]=wasmExports[\"m\"])(a0,a1);var _ImageScanner_get_results=Module[\"_ImageScanner_get_results\"]=a0=>(_ImageScanner_get_results=Module[\"_ImageScanner_get_results\"]=wasmExports[\"n\"])(a0);var _ImageScanner_scan=Module[\"_ImageScanner_scan\"]=(a0,a1)=>(_ImageScanner_scan=Module[\"_ImageScanner_scan\"]=wasmExports[\"o\"])(a0,a1);var _Image_create=Module[\"_Image_create\"]=(a0,a1,a2,a3,a4,a5)=>(_Image_create=Module[\"_Image_create\"]=wasmExports[\"p\"])(a0,a1,a2,a3,a4,a5);var _Image_destory=Module[\"_Image_destory\"]=a0=>(_Image_destory=Module[\"_Image_destory\"]=wasmExports[\"q\"])(a0);var _Image_get_symbols=Module[\"_Image_get_symbols\"]=a0=>(_Image_get_symbols=Module[\"_Image_get_symbols\"]=wasmExports[\"r\"])(a0);var ___errno_location=()=>(___errno_location=wasmExports[\"__errno_location\"])();var _free=Module[\"_free\"]=a0=>(_free=Module[\"_free\"]=wasmExports[\"t\"])(a0);var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"u\"])(a0);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nexport default zbarWasm;","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport zbarJs from '../build/zbar.js';\nimport type ZBarInstance from './ZBarInstance';\n\nlet zbarInstance: ZBarInstance;\n\nconst zbarInstancePromise = (async () => {\n  zbarInstance = await zbarJs();\n  if (!zbarInstance) {\n    throw Error('WASM was not loaded');\n  }\n  return zbarInstance;\n})();\n\nexport const getInstance = async (): Promise<ZBarInstance> => {\n  return await zbarInstancePromise;\n};\n","import { CppObject } from './CppObject';\nimport { ZBarSymbol } from './ZBarSymbol';\nimport { getInstance } from './instance';\n\nexport class ZBarImage extends CppObject {\n  static async createFromGrayBuffer(\n    width: number,\n    height: number,\n    dataBuf: ArrayBuffer,\n    sequence_num = 0\n  ): Promise<ZBarImage> {\n    const inst = await getInstance(),\n      data = new Uint8Array(dataBuf),\n      len = width * height;\n    if (len !== data.byteLength) {\n      throw Error(\n        `data length (${data.byteLength} bytes) does not match width and height (${len} bytes)`\n      );\n    }\n    const buf = inst._malloc(len),\n      heap = inst.HEAPU8;\n    heap.set(data, buf);\n    const ptr = inst._Image_create(\n      width,\n      height,\n      0x30303859 /* Y800 */,\n      buf,\n      len,\n      sequence_num\n    );\n    return new this(ptr, inst);\n  }\n\n  static async createFromRGBABuffer(\n    width: number,\n    height: number,\n    dataBuf: ArrayBuffer,\n    sequence_num = 0\n  ): Promise<ZBarImage> {\n    const inst = await getInstance(),\n      data = new Uint8Array(dataBuf),\n      len = width * height;\n    if (len * 4 !== data.byteLength) {\n      throw Error(\n        `data length (${\n          data.byteLength\n        } bytes) does not match width and height (${len * 4} bytes)`\n      );\n    }\n    const buf = inst._malloc(len),\n      bufEnd = buf + len,\n      heap = inst.HEAPU8;\n    for (let i = buf, j = 0; i < bufEnd; i++, j += 4) {\n      heap[i] =\n        (data[j] * 19595 + data[j + 1] * 38469 + data[j + 2] * 7472) >> 16;\n    }\n    const ptr = inst._Image_create(\n      width,\n      height,\n      0x30303859 /* Y800 */,\n      buf,\n      len,\n      sequence_num\n    );\n    return new this(ptr, inst);\n  }\n\n  destroy(): void {\n    this.checkAlive();\n    this.inst._Image_destory(this.ptr);\n    this.ptr = 0;\n  }\n\n  getSymbols(): Array<ZBarSymbol> {\n    this.checkAlive();\n    const res = this.inst._Image_get_symbols(this.ptr);\n    return ZBarSymbol.createSymbolsFromPtr(res, this.inst.HEAPU8.buffer);\n  }\n}\n","import { CppObject } from './CppObject';\nimport { ZBarImage } from './ZBarImage';\nimport { getInstance } from './instance';\nimport { ZBarSymbol } from './ZBarSymbol';\nimport { ZBarSymbolType, ZBarConfigType } from './const';\n\nexport class ZBarScanner extends CppObject {\n  static async create(): Promise<ZBarScanner> {\n    const inst = await getInstance(),\n      ptr = inst._ImageScanner_create();\n    return new this(ptr, inst);\n  }\n\n  destroy(): void {\n    this.checkAlive();\n    this.inst._ImageScanner_destory(this.ptr);\n    this.ptr = 0;\n  }\n\n  setConfig(sym: ZBarSymbolType, conf: ZBarConfigType, value: number): number {\n    this.checkAlive();\n    return this.inst._ImageScanner_set_config(this.ptr, sym, conf, value);\n  }\n\n  enableCache(enable = true): void {\n    this.checkAlive();\n    this.inst._ImageScanner_enable_cache(this.ptr, enable);\n  }\n\n  recycleImage(image: ZBarImage): void {\n    this.checkAlive();\n    this.inst._ImageScanner_recycle_image(this.ptr, image.getPointer());\n  }\n\n  getResults(): Array<ZBarSymbol> {\n    this.checkAlive();\n    const res = this.inst._ImageScanner_get_results(this.ptr);\n    return ZBarSymbol.createSymbolsFromPtr(res, this.inst.HEAPU8.buffer);\n  }\n\n  scan(image: ZBarImage): number {\n    this.checkAlive();\n    return this.inst._ImageScanner_scan(this.ptr, image.getPointer());\n  }\n}\n","import { ZBarImage } from './ZBarImage'\nimport { ZBarScanner } from './ZBarScanner'\nimport { ZBarSymbol } from './ZBarSymbol'\nimport { ZBarConfigType, ZBarSymbolType } from './const'\n\n// Returns a new ZBarScanner instance that delegates QR code text decoding\n// to the native TextDecoder (fixes #7: Issue with utf-8)\nexport const getDefaultScanner = async () => {\n  const scanner = await ZBarScanner.create()\n  scanner.setConfig(ZBarSymbolType.ZBAR_NONE, ZBarConfigType.ZBAR_CFG_BINARY, 1)\n  return scanner\n}\n\nlet defaultScanner: ZBarScanner\n\nconst scanImage = async (\n  image: ZBarImage,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  if (scanner === undefined) {\n    // Create the default scanner lazily\n    scanner = defaultScanner || await getDefaultScanner()\n    defaultScanner = scanner\n  }\n  const res = scanner.scan(image)\n  if (res < 0) {\n    throw Error('Scan Failed')\n  }\n  if (res === 0) return []\n  return image.getSymbols()\n}\nexport const scanGrayBuffer = async (\n  buffer: ArrayBuffer,\n  width: number,\n  height: number,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  const\n    image = await ZBarImage.createFromGrayBuffer(width, height, buffer),\n    res = await scanImage(image, scanner);\n  image.destroy()\n  return res\n}\nexport const scanRGBABuffer = async (\n  buffer: ArrayBuffer,\n  width: number,\n  height: number,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  const\n    image = await ZBarImage.createFromRGBABuffer(width, height, buffer),\n    res = await scanImage(image, scanner);\n  image.destroy()\n  return res\n}\nexport const scanImageData = async (\n  image: ImageData,\n  scanner?: ZBarScanner\n): Promise<Array<ZBarSymbol>> => {\n  return await scanRGBABuffer(\n    image.data.buffer,\n    image.width,\n    image.height,\n    scanner\n  )\n}\n"],"names":["CppObject","constructor","ptr","inst","Object","defineProperty","this","checkAlive","Error","getPointer","ZBarSymbolType","ZBAR_NONE","ZBAR_PARTIAL","ZBAR_EAN2","ZBAR_EAN5","ZBAR_EAN8","ZBAR_UPCE","ZBAR_ISBN10","ZBAR_UPCA","ZBAR_EAN13","ZBAR_ISBN13","ZBAR_COMPOSITE","ZBAR_I25","ZBAR_DATABAR","ZBAR_DATABAR_EXP","ZBAR_CODABAR","ZBAR_CODE39","ZBAR_PDF417","ZBAR_QRCODE","ZBAR_SQCODE","ZBAR_CODE93","ZBAR_CODE128","ZBAR_SYMBOL","ZBAR_ADDON2","ZBAR_ADDON5","ZBAR_ADDON","ZBarConfigType","TypePointer","buf","ptr32","HEAP8","Int8Array","HEAPU32","Uint32Array","HEAP32","Int32Array","SymbolPtr","type","data","len","from","subarray","points","res","i","x","y","push","orientation","next","time","cacheCount","quality","SymbolSetPtr","head","ZBarSymbol","typeName","keys","find","key","createSymbolsFromPtr","symbol","decode","encoding","TextDecoder","_scriptDir","zbarWasm","url","moduleArg","readyPromiseResolve","readyPromiseReject","Module","Promise","resolve","reject","read_","readAsync","readBinary","moduleOverrides","assign","ENVIRONMENT_IS_WEB","window","ENVIRONMENT_IS_WORKER","importScripts","ENVIRONMENT_IS_NODE","process","versions","node","scriptDirectory","createRequire","import","require","fs","nodePath","dirname","fileURLToPath","URL","filename","binary","isFileURI","normalize","readFileSync","undefined","ret","buffer","Uint8Array","onload","onerror","readFile","err","argv","length","replace","slice","self","location","href","document","currentScript","src","indexOf","substr","lastIndexOf","xhr","XMLHttpRequest","open","send","responseText","responseType","response","status","wasmBinary","wasmMemory","wasmExports","out","console","log","bind","error","WebAssembly","abort","HEAPU8","ABORT","updateMemoryViews","b","Int16Array","Uint16Array","Float32Array","Float64Array","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runDependencies","dependenciesFulfilled","what","e","RuntimeError","wasmBinaryFile","path","dataURIPrefix","isDataURI","startsWith","getBinarySync","file","instantiateArrayBuffer","binaryFile","imports","receiver","fetch","credentials","then","catch","getBinaryPromise","instantiate","instance","reason","calledRun","callRuntimeCallbacks","callbacks","shift","growMemory","size","pages","byteLength","grow","UTF8Decoder","printCharBuffers","printChar","stream","curr","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","str","u0","u1","u2","String","fromCharCode","ch","UTF8ArrayToString","wasmImports","d","Date","now","c","requestedSize","oldSize","maxHeapSize","multiple","cutDown","overGrownHeapSize","Math","min","newSize","max","f","fd","offset_low","offset_high","whence","newOffset","a","iov","iovcnt","pnum","num","j","run","doRun","cb","unshift","postRun","preRun","setTimeout","callback","info","receiveInstance","module","exports","id","removeRunDependency","result","instantiateStreaming","createWasm","a0","a1","a2","a3","a4","a5","runCaller","pop","ready","zbarInstance","zbarInstancePromise","zbarJs","getInstance","async","ZBarImage","createFromGrayBuffer","width","height","dataBuf","sequence_num","_malloc","set","_Image_create","createFromRGBABuffer","bufEnd","heap","destroy","_Image_destory","getSymbols","_Image_get_symbols","ZBarScanner","create","_ImageScanner_create","_ImageScanner_destory","setConfig","sym","conf","value","_ImageScanner_set_config","enableCache","enable","_ImageScanner_enable_cache","recycleImage","image","_ImageScanner_recycle_image","getResults","_ImageScanner_get_results","scan","_ImageScanner_scan","getDefaultScanner","scanner","defaultScanner","scanImage","scanGrayBuffer","scanRGBABuffer","scanImageData"],"mappings":"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"}